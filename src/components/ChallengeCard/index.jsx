import { useState } from 'react';
import ChallengeName from '../ChallengeName';
import Element from '../Element';
import IconCard from '../IconCard';
import styles from './style.module.scss';

export default function ChallengeCard({ data, title, func }) {

    const sad = <svg width="43" height="42" viewBox="0 0 43 42" fill="npne" xmlns="http://www.w3.org/2000/svg"><g clipPath="url(#clip0_374_9824)"><path d="M21.4997 0C16.1192 0 10.7391 2.04733 6.64368 6.14279C-1.54842 14.3349 -1.54763 27.6635 6.64447 35.856C10.7395 39.9519 16.1196 41.9992 21.4997 41.9992C26.8798 41.9992 32.2599 39.9511 36.3565 35.8537C44.5482 27.6627 44.5474 14.3353 36.3573 6.14477C32.2603 2.04812 26.8798 0 21.4997 0ZM34.0645 33.5636C30.6002 37.0278 26.0502 38.7595 21.4997 38.7603C16.9496 38.7603 12.3996 37.0286 8.93534 33.5652C8.06889 32.6987 7.31134 31.7645 6.66189 30.7801C2.115 23.8853 2.87334 14.4969 8.93534 8.43445C12.3996 4.97062 16.9496 3.2389 21.4997 3.2389C26.0498 3.2389 30.5998 4.97062 34.0645 8.43485C40.9929 15.3629 40.9921 26.6363 34.0645 33.5636ZM10.2766 20.7157C9.79665 20.267 9.77209 19.5146 10.2204 19.0342C10.6686 18.5539 11.4155 18.523 11.9022 18.9776C13.1896 20.1866 14.5114 19.0735 14.658 18.9428C15.0956 18.5507 15.7434 18.542 16.1893 18.8956C16.242 18.9368 16.2919 18.984 16.3382 19.0358C16.7762 19.5253 16.7346 20.2773 16.2451 20.7157C15.1902 21.6601 12.5988 22.8877 10.2766 20.7157ZM32.7751 19.022C33.2127 19.5114 33.1715 20.2634 32.682 20.7018C31.6271 21.6463 29.0356 22.8735 26.7135 20.7018C26.2335 20.2531 26.2094 19.5007 26.6572 19.0204C27.1051 18.54 27.8524 18.5091 28.3391 18.9638C29.6265 20.1728 30.9483 19.0596 31.0948 18.9289C31.532 18.5369 32.1803 18.5282 32.6262 18.8818C32.6788 18.923 32.7283 18.9701 32.7751 19.022ZM30.999 31.4157C31.2596 32.018 30.9828 32.7173 30.3801 32.9779C29.7781 33.2392 29.0796 32.9616 28.819 32.3589C27.6726 29.7105 24.9655 27.9978 21.9199 27.9978C18.8045 27.9978 16.0804 29.7085 14.9807 32.3566C14.791 32.8124 14.3487 33.0892 13.8834 33.0892C13.7317 33.0892 13.5773 33.0603 13.4284 32.9985C12.8225 32.7462 12.5354 32.0508 12.7869 31.4454C14.2564 27.9079 17.8414 25.6229 21.9203 25.6229C25.9135 25.6225 29.4776 27.8964 30.999 31.4157Z" fill="white" /></g><defs><clipPath id="clip0_374_9824"><rect width="42" height="42" fill="white" transform="translate(0.5)" /></clipPath></defs></svg>
    const neutral = <svg width="43" height="42" viewBox="0 0 43 42" fill="none" xmlns="http://www.w3.org/2000/svg"><g clipPath="url(#clip0_374_9827)"><path d="M21.5 42C15.8907 42 10.6172 39.8156 6.6507 35.8493C2.68441 31.8828 0.5 26.6093 0.5 21C0.5 15.3907 2.68441 10.1172 6.6507 6.1507C10.6172 2.18441 15.8907 0 21.5 0C27.1093 0 32.3828 2.18441 36.3493 6.1507C40.3156 10.1172 42.5 15.3907 42.5 21C42.5 26.6093 40.3156 31.8828 36.3493 35.8493C32.3828 39.8156 27.1093 42 21.5 42ZM21.5 3.28125C11.7298 3.28125 3.78125 11.2298 3.78125 21C3.78125 30.7702 11.7298 38.7188 21.5 38.7188C31.2702 38.7188 39.2188 30.7702 39.2188 21C39.2188 11.2298 31.2702 3.28125 21.5 3.28125ZM29.7031 27.3164C29.7031 26.4103 28.9686 25.6758 28.0625 25.6758H14.9375C14.0314 25.6758 13.2969 26.4103 13.2969 27.3164C13.2969 28.2225 14.0314 28.957 14.9375 28.957H28.0625C28.9686 28.957 29.7031 28.2225 29.7031 27.3164ZM17.6445 19.3594H12.3125C11.4064 19.3594 10.6719 18.6249 10.6719 17.7188C10.6719 16.8126 11.4064 16.0781 12.3125 16.0781H17.6445C18.5506 16.0781 19.2852 16.8126 19.2852 17.7188C19.2852 18.6249 18.5506 19.3594 17.6445 19.3594ZM32.3281 17.7188C32.3281 16.8126 31.5936 16.0781 30.6875 16.0781H25.2734C24.3673 16.0781 23.6328 16.8126 23.6328 17.7188C23.6328 18.6249 24.3673 19.3594 25.2734 19.3594H30.6875C31.5936 19.3594 32.3281 18.6249 32.3281 17.7188Z" fill="white" /></g><defs><clipPath id="clip0_374_9827"><rect width="42" height="42" fill="white" transform="translate(0.5)" /></clipPath></defs></svg>
    const happy = <svg width="43" height="42" viewBox="0 0 43 42" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36.356 35.8552C44.5481 27.6638 44.5474 14.3355 36.3568 6.14527C28.1642 -2.04809 14.835 -2.04809 6.64403 6.14329C-1.54854 14.3347 -1.54775 27.6642 6.64483 35.8572C14.835 44.0478 28.1642 44.0478 36.356 35.8552ZM8.93572 8.43498C15.8634 1.50764 27.1358 1.50685 34.0651 8.43577C40.9928 15.3635 40.992 26.637 34.0643 33.5643C27.1366 40.4921 15.8638 40.4929 8.93572 33.5651C2.00641 26.6366 2.0072 15.3627 8.93572 8.43498ZM23.8077 16.502C23.8077 14.602 25.3533 13.0564 27.2542 13.0564C29.1538 13.0564 30.6994 14.6016 30.6994 16.502C30.6994 17.0489 30.2563 17.492 29.7094 17.492C29.1625 17.492 28.7194 17.0489 28.7194 16.502C28.7194 15.6938 28.062 15.0364 27.2542 15.0364C26.4455 15.0364 25.7878 15.6938 25.7878 16.502C25.7878 17.0489 25.3446 17.492 24.7977 17.492C24.2509 17.492 23.8077 17.0485 23.8077 16.502ZM12.8293 16.4913C12.8293 14.5917 14.3753 13.0457 16.2757 13.0457C18.1753 13.0457 19.7213 14.5913 19.7213 16.4913C19.7213 17.0382 19.2782 17.4813 18.7313 17.4813C18.1844 17.4813 17.7413 17.0382 17.7413 16.4913C17.7413 15.6831 17.0839 15.0257 16.2757 15.0257C15.467 15.0257 14.8093 15.6831 14.8093 16.4913C14.8093 17.0382 14.3661 17.4813 13.8193 17.4813C13.2724 17.4813 12.8293 17.0378 12.8293 16.4913ZM12.3901 25.3421C12.1382 24.7366 12.4253 24.0412 13.0316 23.7893C13.1805 23.7279 13.335 23.6986 13.487 23.6986C13.9527 23.6986 14.3947 23.9739 14.5844 24.4312C15.6841 27.0789 18.4078 28.7889 21.5236 28.7889C24.5688 28.7889 27.2767 27.0778 28.422 24.4285C28.6826 23.8261 29.3819 23.5485 29.9838 23.8095C30.5858 24.0705 30.863 24.7694 30.6024 25.3714C29.0805 28.8907 25.5165 31.1645 21.5232 31.1645C17.4443 31.1645 13.8593 28.8796 12.3901 25.3421Z" fill="white" /></svg>

    const [emojiIcon, setEmojiIcon] = useState(null);

    const handleEmoji = (index) => {
        setEmojiIcon(index);
        console.log(emojiIcon);
        // קבלת התמונה אחרי שנייה
        setTimeout(() => {
            func(index)
        }, 700);

    };

    const getClassName = (index) => {
        return `${styles.emoji} ${emojiIcon === index ? styles.active : ""}`;
    };
    const emoji = [sad, neutral, happy]
    return (
        <div className={styles.ChallengeCard}>
            <ChallengeName text={title} />
            <div className={styles.hearttext}>
                <IconCard>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.8327 4.41516C15.5662 3.37012 14.9983 2.46899 14.1902 1.8092C13.4029 1.1665 12.4386 0.8125 11.4747 0.8125C10.7357 0.8125 10.0308 1.01147 9.3796 1.40381C8.86532 1.71375 8.40267 2.13525 7.99862 2.66138C7.07955 1.4635 5.86617 0.8125 4.52413 0.8125C3.56063 0.8125 2.59664 1.1665 1.80953 1.8092C1.00167 2.46899 0.433801 3.37 0.167321 4.41504C-0.0281131 5.18152 -0.117102 6.2572 0.268518 7.5509H2.69003L3.56442 5.802C3.64388 5.64319 3.80612 5.54285 3.98361 5.54285C4.16122 5.54285 4.32345 5.64319 4.4028 5.802L5.99166 8.97962L7.58053 5.802C7.65988 5.64319 7.82211 5.54285 7.99972 5.54285C8.17721 5.54285 8.33944 5.64319 8.41891 5.802L9.2933 7.5509H12.5581C12.817 7.5509 13.0267 7.76074 13.0267 8.01953C13.0267 8.27844 12.817 8.48828 12.5581 8.48828H9.00363C8.82614 8.48828 8.6639 8.38794 8.58444 8.22913L7.99972 7.05957L6.41085 10.2372C6.33139 10.396 6.16915 10.4962 5.99166 10.4962C5.81405 10.4962 5.65182 10.396 5.57247 10.2372L3.98373 7.05957L3.39889 8.22925C3.31942 8.38794 3.15719 8.48828 2.9797 8.48828H0.619592C0.776208 8.83569 0.967615 9.19531 1.20004 9.5658C2.47592 11.6006 4.68783 13.486 7.77401 15.1694C7.84396 15.2076 7.92123 15.2267 7.9985 15.2267C8.07577 15.2267 8.15292 15.2076 8.22286 15.1696C11.31 13.4858 13.5225 11.6006 14.799 9.56592C16.1782 7.36743 16.1224 5.55151 15.8327 4.41516Z" fill="black" />
                    </svg>
                </IconCard>
                <div>{data.title}</div>
            </div>
            <Element>
                <div className={styles.questext}>
                    <div className={styles.iconques}>
                        <svg width="10" height="14" viewBox="0 0 10 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3.39245 9.08723V6.02015H4.85706C5.5463 6.02015 6.05173 5.8421 6.37337 5.48599C6.7065 5.1184 6.87306 4.67041 6.87306 4.142C6.87306 3.76292 6.7984 3.43553 6.64907 3.15984C6.49973 2.87266 6.28147 2.65441 5.9943 2.50507C5.70712 2.35574 5.37399 2.28107 4.99491 2.28107C4.58137 2.28107 4.22527 2.36723 3.9266 2.53953C3.63942 2.71184 3.41542 2.94158 3.2546 3.22876C3.09378 3.51594 3.01337 3.84907 3.01337 4.22815H0.72168C0.72168 3.49297 0.888244 2.82097 1.22137 2.21215C1.5545 1.60333 2.04271 1.12087 2.68599 0.764764C3.32927 0.397174 4.11614 0.213379 5.0466 0.213379C5.89665 0.213379 6.62609 0.379943 7.23491 0.713071C7.85522 1.03471 8.33194 1.47697 8.66506 2.03984C8.99819 2.60271 9.16476 3.24025 9.16476 3.95246V4.15923C9.16476 4.85994 8.99819 5.48599 8.66506 6.03738C8.33194 6.58876 7.83799 7.02528 7.18322 7.34692C6.53994 7.65707 5.75306 7.82364 4.8226 7.84661L5.80476 6.95061L5.7703 9.08723H3.39245ZM3.20291 13.1537V10.6035H5.95983V13.1537H3.20291Z" fill="black" />
                        </svg>
                    </div>
                    <div>{data.content}</div>
                </div>
            </Element>
            <Element>
                <div className={styles.emoji}>
                    {emoji.map((icon, index) => <div key={index} onClick={() => handleEmoji(index)} className={getClassName(index)}>{icon}</div>)}
                </div>
            </Element>
        </div>
    )
}
